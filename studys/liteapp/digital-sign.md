# 签名 !== 加密
签名和加密是两码事
很容易混淆, 因为签名本质上也是对数据进行了一次加密, 但是并非我们需要的那种加密

真正的加密是使用公钥加密, 使用私钥解密
  这样一来, 只有我自己可以解密, 保证了数据不会泄露
而签名则是使用私钥加密, 使用公钥解密
  所有人都可以解密, 所以数据是肯定会泄露
  但是因为公钥和私钥是配对的, 所以可以保证数据是我的

所以签名, 就只是保证数据不被篡改的手段, 和通常说的数据加密不是一回事

这里面有个关键点, 就是公钥一定要**足够公开**, 如果没人知道你的公钥, 那么拦截者岂不还是可以随便篡改, 签名的意义就不复存在了

# 信息摘要
信息摘要就是通过哈希函数, 将一段任意长的数据内容对应为一段固定长度的字符串
哈希函数是不可逆的, 通过信息摘要无法还原出对应的内容
通过对信息摘要的比对可以快速发现文本有没有差生变化
常见哈希函数有 md5, sha1, sha256 等

# 数字证书
数字证书就是 非对称加密(数字签名) + 信息摘要(哈希) 
先将要发送的内容生成信息摘要, 然后对摘要用私钥加密(签名), 和原内容 + 公钥一起发送给对端
对端那你的公钥去解密出信息摘要, 然后把原文用同样的哈希生成一个信息摘要进行比对, 相同则说明完整

但是这里有个问题呀, 数字证书是如何保护公钥的呢? 
我的理解的所谓公钥安全是: 对端确定你的公钥真的是你的
但是你把加密后的信息摘要, 和公钥发给对端, 中途是可以被更改的

这时出现了 CA(Certificate Authority) 这种你和对端都信任的第三方机构
具体来说, 大概是这样的:
  首先我向 CA 申请一对公私钥 (openssl 之类的)
  然后 CA 用自己的私钥, 给你的公钥 (以及一些其他信息) 进行一次签名, 交给所有人
  这时候他说好了, 现在你去哪人家都认你了, 所有人都必须要给我面子
  现在你正常发送 加密后的摘要 + 原文 + CA 给你的公钥 给对端
  对端使用他本来就有的 CA 的公钥验证你发过来的公钥是不是真的, 就可以了
这里还有隐患, 就是拦截者如果知道用你同样的信息去找 CA 申请一个它自己的有认证的公钥, 岂不还是可以拦截?

# 证书指纹
证书指纹其实就是证书的[信息摘要](#信息摘要), 那么这个玩意有啥用呢?
我还没搞明白...

# 快应用咋回事
我发现不论华为还是小米的快应用, 都会让我自己生成 证书.pem 和 私钥.pem 两个文件, 然后去打 release 包, 但是这个包上传给厂商平台之后, 是要被他们解开并进一步处理的, 也就是说, 他们需要用我们开发者个人的签名去做应用的签名

如果只是为了防篡改, 那么厂商其实可以全部自己签名, 他们这么做的目的则是给应用打上开发者烙印, 以便于管理, 例如: 同签名的包才可以升级, 才可以互相共享一些信息等

而微信小程序则不需要这个东西, 因为微信的用户体系可以直接用

另外, 华为让我们主动上传了一个[证书指纹](#证书指纹), 而小米则没有, 这是为什么?